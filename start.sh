#!/bin/bash

# ๐ ูุธุงู ุจุตูุฑุฉ ุงูุซูุฑู - ููุดุบู ุณุฑูุน
# ๐งฌ ุฌููุน ุงูุฃููุงุฑ ูุงููุธุฑูุงุช ูู ุฅุจุฏุงุน ุจุงุณู ูุญูู ุนุจุฏุงููู

echo "======================================================================="
echo "๐ ูุธุงู ุจุตูุฑุฉ ุงูุซูุฑู - ููุดุบู ุณุฑูุน"
echo "๐งฌ ุฌููุน ุงูุฃููุงุฑ ูุงููุธุฑูุงุช ูู ุฅุจุฏุงุน ุจุงุณู ูุญูู ุนุจุฏุงููู"
echo "๐ ุงูุชุงุฑูุฎ: $(date '+%Y-%m-%d %H:%M:%S')"
echo "======================================================================="

# ุงูุชุญูู ูู ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Python 3.8 ุฃู ุฃุญุฏุซ"
    exit 1
fi

echo "โ ุชู ุงูุนุซูุฑ ุนูู Python3: $(python3 --version)"

# ุงูุชุญูู ูู ูุฌูุฏ pip
if ! command -v pip &> /dev/null && ! command -v pip3 &> /dev/null; then
    echo "โ pip ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช pip"
    exit 1
fi

# ุชุซุจูุช ุงููุชุทูุจุงุช ุฅุฐุง ูู ุชูู ูุซุจุชุฉ
echo "๐ ูุญุต ุงููุชุทูุจุงุช..."
if [ -f "requirements.txt" ]; then
    echo "๐ฆ ุชุซุจูุช ุงููุชุทูุจุงุช..."
    pip install -r requirements.txt --quiet
    if [ $? -eq 0 ]; then
        echo "โ ุชู ุชุซุจูุช ุงููุชุทูุจุงุช ุจูุฌุงุญ"
    else
        echo "โ๏ธ ุชุญุฐูุฑ: ูุฏ ุชููู ููุงู ูุดุงูู ูู ุชุซุจูุช ุจุนุถ ุงููุชุทูุจุงุช"
    fi
else
    echo "โ๏ธ ููู requirements.txt ุบูุฑ ููุฌูุฏ"
fi

echo ""
echo "๐ ุชุดุบูู ูุธุงู ุจุตูุฑุฉ ุงูุซูุฑู..."
echo ""

# ุชุดุบูู ุงููุธุงู
python3 run_basera.py

echo ""
echo "๐ ุดูุฑุงู ูุงุณุชุฎุฏุงู ูุธุงู ุจุตูุฑุฉ ุงูุซูุฑู!"
echo "๐งฌ ุฌููุน ุงูุฃููุงุฑ ูุงููุธุฑูุงุช ูู ุฅุจุฏุงุน ุจุงุณู ูุญูู ุนุจุฏุงููู"
